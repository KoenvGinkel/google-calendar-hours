{"version":3,"sources":["App.module.css","features/CustomRange.module.css","google_auth.png","features/Hours.module.css","features/WeekStart.module.css","Interface.module.css","stores/authentication.js","AuthScreen.js","stores/api.js","stores/calendarEvents.js","stores/storage.js","constants.js","stores/viewState.js","stores/calendars.js","features/CalendarsList.js","features/Range.js","features/RangeChanger.js","features/CustomRange.js","features/Hours.js","utils/formatDate.js","features/RangeDisplay.js","utils/createBlobUrl.js","features/Events.js","features/WeekStart.js","Interface.js","App.js","stores/index.js","index.js","features/Events.module.css"],"names":["module","exports","authentication","createSlice","name","initialState","reducers","selectAccessToken","state","accessToken","selectHasToken","App","href","params","encode","client_id","redirect_uri","window","location","origin","scope","response_type","getGoogleAuthUrl","data-testid","src","logo","alt","width","height","fetchGoogle","a","url","fetch","access_token","response","status","sessionStorage","removeItem","Promise","reject","json","fetchCalendars","fetchEvents","calendarId","pageToken","acc","encodeURIComponent","singleEvents","maxResults","timeMax","dayjs","add","toJSON","items","nextPageToken","fetchCalendarEvents","calendarEvents","loading","map","setCalendarEvents","payload","events","setLoading","actions","selectIsEventsLoading","selectCalendarEvents","updateConfig","rest","existingConfig","JSON","parse","localStorage","getItem","err","updatedConfig","setItem","stringify","getConfig","RANGE_TYPE","SORT_BY","WEEK_START","viewState","setSelectedCalendarId","selectedCalendarId","setRangeType","selectedRangeType","changeRange","currentDatePointerStart","subtract","resetRange","startOf","setWeekStart","weekStart","setStart","setEnd","currentDatePointerEnd","selectSelectedCalendar","selectDate","selectRangeType","selectWeekStart","selectLocaleForWeekStart","selectCurrentDatePointers","rangeStart","rangeEnd","currentDatePointerStartDate","start","end","locale","weekday","selectEventsByRange","filter","event","itemDateStart","Date","dateTime","itemDateEnd","selectHours","hours","forEach","Math","round","setSelectedCalendar","dispatch","getState","id","summary","Boolean","loadCalendarEvents","changeWeekStart","calendars","list","setCalendars","selectCalendars","CalendarsList","useDispatch","useSelector","selectedCalendar","className","bootstrap","onChange","target","value","key","label","Range","currentRangeType","range","correctedEnd","changeRangeType","RangeChanger","role","type","cx","btn","onClick","CustomRange","styles","component","htmlFor","inputDate","format","changeStart","changeEnd","Hours","formatDate","date","options","Intl","DateTimeFormat","navigator","language","RangeDisplay","currentDate","localeForWeekStart","day","month","year","startOfWeek","createBlobUrl","content","blob","Blob","URL","createObjectURL","Events","downloadBlob","filename","useState","sortBy","setSortBy","currentCalendarName","find","item","eventsToRender","eventsObject","Object","entries","sort","hoursA","hoursB","lines","startA","startB","concat","join","row","listItem","eventDate","title","eventName","eventHours","sortByLabel","checked","download","downloadLink","WeekStart","weekStartLabel","Interface","isEventsOpen","setIsEventsOpen","useEffect","calendarList","calendarExists","eventsLoading","rangeType","interface","hasToken","hashParams","decode","hash","slice","appWrapper","app","sticky","headline","AuthScreen","footer","rel","extend","getAccessToken","e","getViewState","config","store","configureStore","reducer","preloadedState","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.f8eed689.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"appWrapper\":\"App_appWrapper__3rnam\",\"app\":\"App_app__1kX79\",\"sticky\":\"App_sticky__1Ko52\",\"content\":\"App_content__3La4L\",\"headline\":\"App_headline__1z0fO\",\"footer\":\"App_footer__29Fsv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"component\":\"CustomRange_component__hBFSg\",\"inputDate\":\"CustomRange_inputDate__3v021\"};","module.exports = __webpack_public_path__ + \"static/media/google_auth.75a7cb04.png\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"hours\":\"Hours_hours__2U6LB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"weekStartLabel\":\"WeekStart_weekStartLabel__1I0YY\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"interface\":\"Interface_interface__1pJyE\"};","import { createSlice } from '@reduxjs/toolkit';\n\nexport const authentication = createSlice({\n  name: 'authentication',\n  initialState: null,\n  reducers: {},\n});\n\nexport const selectAccessToken = (state) => state.authentication.accessToken;\nexport const selectHasToken = (state) => !!selectAccessToken(state);\n\nexport default authentication.reducer;\n","import React, { Fragment } from 'react';\nimport { encode } from 'qss';\n\nimport logo from './google_auth.png';\n\nconst googleClientId = '502172359025.apps.googleusercontent.com';\nconst googleScope =\n  'https://www.googleapis.com/auth/calendar.readonly https://www.googleapis.com/auth/calendar.events.readonly';\n\nconst App = () => {\n  const getGoogleAuthUrl = () => {\n    const params = encode({\n      client_id: googleClientId,\n      redirect_uri: window.location.origin,\n      scope: googleScope,\n      response_type: 'token',\n    });\n\n    return `https://accounts.google.com/o/oauth2/auth?${params}`;\n  };\n\n  return (\n    <Fragment>\n      <p>\n        This web app lets you see how many hours you spend on a Google Calendar.\n        It uses the Google Calendar API to fetch your calendars and events,\n        crunches the data and displays it nicely. You can filter by day, week,\n        month, year, total or add a custom time range.\n      </p>\n\n      <p>You need to authorize the app with the following link:</p>\n      <a href={getGoogleAuthUrl()} data-testid=\"AuthLink\">\n        <img src={logo} alt=\"Auth with Google\" width=\"191\" height=\"46\" />\n      </a>\n      <h3>Privacy Policy</h3>\n      <p>\n        This app connects to the Google Calendar API to fetch your calendars and\n        events, so that it can calculate the hours. This connection happens\n        directly from your browser to the Google API. There are no server or\n        services involved that might cache the data.\n      </p>\n      <p>\n        None of the data fetched from the Google Calendar API is saved elsewhere\n        but in your browser. After you close the browser window/tab all\n        authentication data is delete (technical detail: sessionStorage is\n        used). Thats why you need to reauthorize with Google the next time you\n        visit the page.\n      </p>\n      <p>This app only has read-only access to your calendar data.</p>\n    </Fragment>\n  );\n};\n\nexport default App;\n","import { encode } from 'qss';\nimport dayjs from 'dayjs';\n\nconst API_BASE_PATH = 'https://www.googleapis.com/calendar/v3/';\n\nconst fetchGoogle = async ({ url, accessToken, params }) => {\n  const response = await fetch(\n    `${url}?${encode({\n      access_token: accessToken,\n      ...params,\n    })}`\n  );\n\n  if (response.status !== 200) {\n    sessionStorage.removeItem('accessToken');\n    window.location = '/';\n    return Promise.reject();\n  }\n  return response.json();\n};\n\nexport const fetchCalendars = ({ accessToken }) =>\n  fetchGoogle({ url: `${API_BASE_PATH}users/me/calendarList`, accessToken });\n\nconst fetchEvents = async ({ accessToken, calendarId, pageToken, acc }) => {\n  const { items, nextPageToken } = await fetchGoogle({\n    url: `${API_BASE_PATH}calendars/${encodeURIComponent(calendarId)}/events`,\n    accessToken,\n    params: {\n      singleEvents: true,\n      maxResults: 2500,\n      pageToken,\n      timeMax: dayjs().add(1, 'year').toJSON(),\n    },\n  });\n\n  if (!nextPageToken) {\n    return [...acc, ...items];\n  }\n\n  return fetchEvents({\n    accessToken,\n    calendarId,\n    pageToken: nextPageToken,\n    acc: [...acc, ...items],\n  });\n};\n\nexport const fetchCalendarEvents = ({ accessToken, calendarId }) =>\n  fetchEvents({ accessToken, calendarId, acc: [] });\n","import { createSlice } from '@reduxjs/toolkit';\n\nimport { selectAccessToken } from './authentication';\nimport { fetchCalendarEvents } from './api';\n\nexport const calendarEvents = createSlice({\n  name: 'calendarEvents',\n  initialState: {\n    loading: false,\n    map: {},\n  },\n  reducers: {\n    setCalendarEvents: (state, { payload }) => {\n      state.map[payload.calendarId] = payload.events;\n    },\n    setLoading: (state, { payload }) => {\n      state.loading = payload;\n    },\n  },\n});\n\nconst { setCalendarEvents, setLoading } = calendarEvents.actions;\n\nexport const loadCalendarEvents = ({ calendarId }) => async (\n  dispatch,\n  getState\n) => {\n  const accessToken = selectAccessToken(getState());\n  try {\n    dispatch(setLoading(true));\n    const items = await fetchCalendarEvents({ accessToken, calendarId });\n    dispatch(\n      setCalendarEvents({\n        calendarId,\n        events: items\n          .map(({ id, summary, start, end }) => {\n            // Filter out events that have no `dateTime`. Those are full day\n            // events, they only have the field `date`.\n            if (!start.dateTime) {\n              return null;\n            }\n\n            // only return the fields we need\n            return {\n              id,\n              summary,\n              start,\n              end,\n            };\n          })\n          .filter(Boolean),\n      })\n    );\n  } catch (e) {\n    // do nothing\n  } finally {\n    dispatch(setLoading(false));\n  }\n};\n\nexport const selectIsEventsLoading = (state) =>\n  state.calendarEvents?.loading ?? false;\n\nexport const selectCalendarEvents = (state, calendarId) =>\n  (!selectIsEventsLoading(state) && state.calendarEvents?.map[calendarId]) ??\n  null;\n\nexport default calendarEvents.reducer;\n","export const updateConfig = (rest) => {\n  let existingConfig;\n  try {\n    existingConfig = JSON.parse(window.localStorage.getItem('config'));\n  } catch (err) {\n    // don't handle\n  }\n\n  const updatedConfig = {\n    ...existingConfig,\n    ...rest,\n  };\n\n  window.localStorage.setItem('config', JSON.stringify(updatedConfig));\n};\n\nexport const getConfig = () => {\n  try {\n    return JSON.parse(window.localStorage.getItem('config'));\n  } catch (err) {\n    // don't handle\n  }\n  return null;\n};\n","export const RANGE_TYPE = {\n  DAY: 'day',\n  WEEK: 'week',\n  MONTH: 'month',\n  YEAR: 'year',\n  TOTAL: 'total',\n  CUSTOM: 'custom',\n};\n\nexport const SORT_BY = {\n  DATE: 'date',\n  AMOUNT: 'amount',\n};\n\nexport const WEEK_START = {\n  MONDAY: 'monday',\n  SUNDAY: 'sunday',\n};\n","import { createSlice } from '@reduxjs/toolkit';\nimport dayjs from 'dayjs';\nimport 'dayjs/locale/de';\n\nimport { loadCalendarEvents, selectCalendarEvents } from './calendarEvents';\nimport { updateConfig } from './storage';\nimport { RANGE_TYPE, WEEK_START } from '../constants';\n\nexport const viewState = createSlice({\n  name: 'viewState',\n  initialState: null,\n  reducers: {\n    setSelectedCalendarId: (state, { payload }) => {\n      state.selectedCalendarId = payload;\n    },\n    setRangeType: (state, { payload }) => {\n      state.selectedRangeType = payload;\n    },\n    changeRange: (state, { payload }) => {\n      if (payload === 'prev') {\n        state.currentDatePointerStart = dayjs(state.currentDatePointerStart)\n          .subtract(1, state.selectedRangeType)\n          .toJSON();\n      } else if (payload === 'next') {\n        state.currentDatePointerStart = dayjs(state.currentDatePointerStart)\n          .add(1, state.selectedRangeType)\n          .toJSON();\n      }\n    },\n    resetRange: (state) => {\n      state.currentDatePointerStart = dayjs().startOf('day').toJSON();\n    },\n    setWeekStart: (state, { payload }) => {\n      state.weekStart = payload;\n    },\n    setStart: (state, { payload }) => {\n      state.currentDatePointerStart = payload;\n    },\n    setEnd: (state, { payload }) => {\n      state.currentDatePointerEnd = payload;\n    },\n  },\n});\n\nexport const { changeRange, resetRange } = viewState.actions;\nconst {\n  setSelectedCalendarId,\n  setRangeType,\n  setWeekStart,\n  setStart,\n  setEnd,\n} = viewState.actions;\n\nexport const selectSelectedCalendar = (state) =>\n  state.viewState.selectedCalendarId;\n\nexport const selectDate = (state) => state.viewState.currentDatePointerStart;\n\nexport const selectRangeType = (state) => state.viewState.selectedRangeType;\nexport const selectWeekStart = (state) => state.viewState.weekStart;\nexport const selectLocaleForWeekStart = (state) =>\n  state.viewState.weekStart === WEEK_START.SUNDAY ? 'en' : 'de';\n\nexport const selectCurrentDatePointers = (state) => {\n  const {\n    selectedRangeType,\n    currentDatePointerStart,\n    currentDatePointerEnd,\n  } = state.viewState;\n  const currentDatePointerStartDate = dayjs(currentDatePointerStart);\n\n  if (selectedRangeType === RANGE_TYPE.CUSTOM) {\n    return {\n      start: dayjs(currentDatePointerStart),\n      // The selected end day should be included in the calculation, so we\n      // need to add an extra day.\n      end: dayjs(currentDatePointerEnd).add(1, 'day'),\n    };\n  }\n\n  let rangeStart;\n  let rangeEnd;\n\n  if (selectedRangeType === RANGE_TYPE.DAY) {\n    rangeStart = currentDatePointerStartDate.startOf('day');\n    rangeEnd = rangeStart.add(1, 'day');\n  } else if (selectedRangeType === RANGE_TYPE.WEEK) {\n    rangeStart = currentDatePointerStartDate\n      .locale(selectLocaleForWeekStart(state))\n      .startOf('day')\n      .weekday(0);\n    rangeEnd = rangeStart.add(1, 'week');\n  } else if (selectedRangeType === RANGE_TYPE.MONTH) {\n    rangeStart = currentDatePointerStartDate.startOf('month');\n    rangeEnd = rangeStart.add(1, 'month');\n  } else if (selectedRangeType === RANGE_TYPE.YEAR) {\n    rangeStart = currentDatePointerStartDate.startOf('year');\n    rangeEnd = rangeStart.add(1, 'year');\n  } else if (selectedRangeType === RANGE_TYPE.TOTAL) {\n    rangeStart = dayjs('2000-01-01T10:00:00Z');\n    rangeEnd = dayjs('2040-01-01T10:00:00Z');\n  }\n\n  return {\n    start: rangeStart,\n    end: rangeEnd,\n  };\n};\n\nexport const selectEventsByRange = (state) => {\n  const events = selectCalendarEvents(state, selectSelectedCalendar(state));\n\n  if (!events) {\n    return null;\n  }\n\n  const { start, end } = selectCurrentDatePointers(state);\n\n  return events.filter((event) => {\n    const itemDateStart = new Date(event.start.dateTime);\n    const itemDateEnd = new Date(event.end.dateTime);\n\n    return itemDateStart >= start && itemDateEnd <= end;\n  });\n};\n\nexport const selectHours = (state) => {\n  const events = selectEventsByRange(state);\n\n  if (!events) {\n    return null;\n  }\n\n  let hours = 0;\n\n  events.forEach((event) => {\n    const itemDateStart = new Date(event.start.dateTime);\n    const itemDateEnd = new Date(event.end.dateTime);\n\n    hours += (itemDateEnd - itemDateStart) / 1000 / 60 / 60;\n  });\n\n  return Math.round(hours * 100) / 100;\n};\n\nexport const setSelectedCalendar = ({ calendarId }) => (dispatch, getState) => {\n  dispatch(setSelectedCalendarId(calendarId));\n  updateConfig({ selectedCalendarId: calendarId });\n  const calendarEvents = selectCalendarEvents(getState(), calendarId);\n  if (!calendarEvents) {\n    dispatch(loadCalendarEvents({ calendarId }));\n  }\n};\n\nexport const changeRangeType = ({ range }) => (dispatch, getState) => {\n  if (range === RANGE_TYPE.CUSTOM) {\n    const { start, end } = selectCurrentDatePointers(getState());\n    // We need to subtract a day here, because a day was added to `end`\n    // in order to have the selected end day in the calculation.\n    const correctedEnd = end.subtract(1, 'day');\n    dispatch(setStart(start.toJSON()));\n    dispatch(setEnd(correctedEnd.toJSON()));\n    updateConfig({ start: start.toJSON(), end: correctedEnd.toJSON() });\n  }\n  dispatch(setRangeType(range));\n  updateConfig({ selectedRangeType: range });\n};\n\nexport const changeWeekStart = (weekStart) => (dispatch) => {\n  dispatch(setWeekStart(weekStart));\n  updateConfig({ weekStart });\n};\n\nexport const changeStart = (start) => (dispatch) => {\n  dispatch(setStart(start));\n  updateConfig({ start });\n};\n\nexport const changeEnd = (end) => (dispatch) => {\n  dispatch(setEnd(end));\n  updateConfig({ end });\n};\n\nexport default viewState.reducer;\n","import { createSlice } from '@reduxjs/toolkit';\n\nimport { selectAccessToken } from './authentication';\nimport { fetchCalendars } from './api';\nimport { setSelectedCalendar } from './viewState';\nimport { getConfig } from './storage';\n\nexport const calendars = createSlice({\n  name: 'calendars',\n  initialState: {\n    list: null,\n  },\n  reducers: {\n    setCalendars: (state, { payload }) => {\n      state.list = payload;\n    },\n  },\n});\n\nconst { setCalendars } = calendars.actions;\n\nexport const loadCalendars = () => async (dispatch, getState) => {\n  const accessToken = selectAccessToken(getState());\n  try {\n    const { items } = await fetchCalendars({ accessToken });\n    const calendarList = items.map(({ id, summary }) => ({\n      id,\n      label: summary,\n    }));\n\n    dispatch(setCalendars(calendarList));\n\n    const { selectedCalendarId } = getConfig() ?? {};\n\n    if (selectedCalendarId) {\n      const calendarExists = calendarList?.find(\n        ({ id }) => id === selectedCalendarId\n      );\n\n      if (calendarExists) {\n        dispatch(setSelectedCalendar({ calendarId: selectedCalendarId }));\n      } else {\n        // dispatch null, so that it's removed from localStorage config\n        dispatch(setSelectedCalendar({ calendarId: null }));\n      }\n    }\n  } catch (e) {\n    // do nothing\n  }\n};\n\nexport const selectCalendars = (state) => state.calendars.list;\n\nexport default calendars.reducer;\n","import React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport bootstrap from 'bootstrap/dist/css/bootstrap.css';\n\nimport { selectCalendars } from '../stores/calendars';\nimport {\n  selectSelectedCalendar,\n  setSelectedCalendar,\n} from '../stores/viewState';\n\nconst CalendarsList = () => {\n  const dispatch = useDispatch();\n\n  const calendars = useSelector(selectCalendars);\n  const selectedCalendar = useSelector(selectSelectedCalendar);\n\n  return (\n    <select\n      data-testid=\"CalendarsList\"\n      className={bootstrap['form-select']}\n      onChange={(event) => {\n        dispatch(setSelectedCalendar({ calendarId: event.target.value }));\n      }}\n      value={selectedCalendar ?? ''}\n    >\n      {!selectedCalendar && (\n        <option key=\"default\">Please select calendar</option>\n      )}\n      {calendars.map(({ id, label }) => (\n        <option value={id} key={id}>\n          {label}\n        </option>\n      ))}\n    </select>\n  );\n};\n\nexport default CalendarsList;\n","import React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport bootstrap from 'bootstrap/dist/css/bootstrap.css';\n\nimport { changeRangeType, selectRangeType } from '../stores/viewState';\n\nconst Range = () => {\n  const dispatch = useDispatch();\n\n  const currentRangeType = useSelector(selectRangeType);\n\n  return (\n    <select\n      data-testid=\"RangeSelectList\"\n      className={bootstrap['form-select']}\n      onChange={(event) =>\n        dispatch(changeRangeType({ range: event.target.value }))\n      }\n      value={currentRangeType}\n    >\n      <option value=\"day\">Day</option>\n      <option value=\"week\">Week</option>\n      <option value=\"month\">Month</option>\n      <option value=\"year\">Year</option>\n      <option value=\"total\">Total</option>\n      <option value=\"custom\">Custom</option>\n    </select>\n  );\n};\n\nexport default Range;\n","import React from 'react';\nimport { useDispatch } from 'react-redux';\nimport cx from 'classnames';\nimport bootstrap from 'bootstrap/dist/css/bootstrap.css';\n\nimport { changeRange, resetRange } from '../stores/viewState';\n\nconst RangeChanger = () => {\n  const dispatch = useDispatch();\n\n  return (\n    <div\n      data-testid=\"RangeChanger\"\n      className={bootstrap['btn-group']}\n      role=\"group\"\n    >\n      <button\n        type=\"button\"\n        className={cx(bootstrap.btn, bootstrap['btn-outline-secondary'])}\n        onClick={() => dispatch(changeRange('prev'))}\n      >\n        Prev\n      </button>\n      <button\n        type=\"button\"\n        className={cx(bootstrap.btn, bootstrap['btn-outline-secondary'])}\n        onClick={() => dispatch(resetRange())}\n      >\n        Reset\n      </button>\n      <button\n        type=\"button\"\n        className={cx(bootstrap.btn, bootstrap['btn-outline-secondary'])}\n        onClick={() => dispatch(changeRange('next'))}\n      >\n        Next\n      </button>\n    </div>\n  );\n};\n\nexport default RangeChanger;\n","import React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport dayjs from 'dayjs';\nimport cx from 'classnames';\nimport bootstrap from 'bootstrap/dist/css/bootstrap.css';\n\nimport {\n  selectCurrentDatePointers,\n  changeStart,\n  changeEnd,\n} from '../stores/viewState';\n\nimport styles from './CustomRange.module.css';\n\nconst CustomRange = () => {\n  const dispatch = useDispatch();\n\n  const { start, end } = useSelector(selectCurrentDatePointers);\n\n  return (\n    <div\n      className={cx(\n        styles.component,\n        bootstrap['input-group'],\n        bootstrap['input-group-sm']\n      )}\n      data-testid=\"CustomRange\"\n    >\n      <label htmlFor=\"dateStart\" className={bootstrap['input-group-text']}>\n        Start:\n      </label>\n      <input\n        className={cx(bootstrap['form-control'], styles.inputDate)}\n        type=\"date\"\n        id=\"dateStart\"\n        value={dayjs(start).format('YYYY-MM-DD')}\n        onChange={({ target }) =>\n          dispatch(changeStart(dayjs(target.value).toJSON()))\n        }\n      />\n      <label htmlFor=\"dateEnd\" className={bootstrap['input-group-text']}>\n        End:\n      </label>\n      <input\n        className={cx(bootstrap['form-control'], styles.inputDate)}\n        type=\"date\"\n        id=\"dateEnd\"\n        // We need to subtract a day here, because a day was added to `end`\n        // in order to have the selected day in the calculation.\n        value={dayjs(end).subtract(1, 'day').format('YYYY-MM-DD')}\n        onChange={({ target }) =>\n          dispatch(changeEnd(dayjs(target.value).toJSON()))\n        }\n      />\n    </div>\n  );\n};\n\nexport default CustomRange;\n","import React from 'react';\nimport { useSelector } from 'react-redux';\n\nimport { selectHours } from '../stores/viewState';\n\nimport styles from './Hours.module.css';\n\nconst Hours = () => (\n  <div className={styles.hours}>{`${useSelector(selectHours)}h`}</div>\n);\n\nexport default Hours;\n","const formatDate = (date, options) =>\n  new Intl.DateTimeFormat([navigator.language, 'en-US'], options).format(date);\n\nexport default formatDate;\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport dayjs from 'dayjs';\n\nimport {\n  selectDate,\n  selectRangeType,\n  selectLocaleForWeekStart,\n} from '../stores/viewState';\nimport formatDate from '../utils/formatDate';\nimport { RANGE_TYPE } from '../constants';\n\nconst RangeDisplay = () => {\n  const currentDate = useSelector(selectDate);\n  const currentRangeType = useSelector(selectRangeType);\n  const localeForWeekStart = useSelector(selectLocaleForWeekStart);\n\n  let range;\n  const date = dayjs(currentDate);\n\n  if (currentRangeType === RANGE_TYPE.DAY) {\n    range = formatDate(dayjs(date), {\n      weekday: 'long',\n      day: 'numeric',\n      month: 'long',\n      year: 'numeric',\n    });\n  } else if (currentRangeType === RANGE_TYPE.WEEK) {\n    const startOfWeek = date.locale(localeForWeekStart).weekday(0);\n    const start = formatDate(startOfWeek, {\n      day: 'numeric',\n      month: 'numeric',\n      year: 'numeric',\n    });\n    const end = formatDate(startOfWeek.add(1, 'week').subtract(1, 'day'), {\n      day: 'numeric',\n      month: 'numeric',\n      year: 'numeric',\n    });\n    range = `${start} - ${end}`;\n  } else if (currentRangeType === RANGE_TYPE.MONTH) {\n    range = formatDate(date, { month: 'long', year: 'numeric' });\n  } else if (currentRangeType === RANGE_TYPE.YEAR) {\n    range = formatDate(date, { year: 'numeric' });\n  }\n\n  return <div data-testid=\"RangeDisplay\">{range}</div>;\n};\n\nexport default RangeDisplay;\n","const createBlobUrl = (content) => {\n  const MIME_TYPE = 'text/csv;charset=UTF-8';\n  const UTF8_BOM = '\\uFEFF';\n  const blob = new Blob([UTF8_BOM + content], { type: MIME_TYPE });\n  return window.URL.createObjectURL(blob);\n};\n\nexport default createBlobUrl;\n","import React, { useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport dayjs from 'dayjs';\nimport cx from 'classnames';\nimport bootstrap from 'bootstrap/dist/css/bootstrap.css';\n\nimport {\n  selectSelectedCalendar,\n  selectEventsByRange,\n  selectDate,\n} from '../stores/viewState';\nimport { selectCalendars } from '../stores/calendars';\nimport createBlobUrl from '../utils/createBlobUrl';\nimport formatDate from '../utils/formatDate';\nimport { SORT_BY } from '../constants';\n\nimport styles from './Events.module.css';\n\nconst EXPORT_DATE_FORMAT = 'DD.MM.YYYY HH:mm';\n\nconst Events = () => {\n  const [sortBy, setSortBy] = useState(SORT_BY.DATE);\n\n  const selectedCalendar = useSelector(selectSelectedCalendar);\n  const events = useSelector(selectEventsByRange);\n  const calendars = useSelector(selectCalendars);\n  const date = useSelector(selectDate);\n\n  const currentCalendarName = calendars.find(\n    (item) => item.id === selectedCalendar\n  )?.label;\n\n  let eventsToRender = events.map((event) => {\n    const itemDateStart = new Date(event.start.dateTime);\n    const itemDateEnd = new Date(event.end.dateTime);\n\n    const hours =\n      Math.round(((itemDateEnd - itemDateStart) / 1000 / 60 / 60) * 100) / 100;\n\n    return {\n      ...event,\n      hours,\n    };\n  });\n\n  let downloadBlob;\n  let filename;\n\n  if (sortBy === SORT_BY.AMOUNT) {\n    const eventsObject = {};\n    eventsToRender.forEach(({ summary, hours }) => {\n      if (eventsObject[summary]) {\n        eventsObject[summary] += hours;\n      } else {\n        eventsObject[summary] = hours;\n      }\n    });\n    const newArray = Object.entries(eventsObject).map(([key, value]) => ({\n      summary: key,\n      hours: value,\n      id: key,\n    }));\n    eventsToRender = newArray.sort(({ hours: hoursA }, { hours: hoursB }) => {\n      if (hoursA > hoursB) {\n        return -1;\n      }\n      if (hoursA < hoursB) {\n        return 1;\n      }\n\n      return 0;\n    });\n  } else {\n    eventsToRender = eventsToRender.sort(\n      ({ start: startA }, { start: startB }) => {\n        if (startA.dateTime < startB.dateTime) {\n          return -1;\n        }\n        if (startA.dateTime > startB.dateTime) {\n          return 1;\n        }\n\n        return 0;\n      }\n    );\n\n    const lines = eventsToRender.map(\n      ({ start, end, summary, hours }) =>\n        `${dayjs(start.dateTime).format(EXPORT_DATE_FORMAT)},${dayjs(\n          end.dateTime\n        ).format(EXPORT_DATE_FORMAT)},\"${summary}\",${hours}`\n    );\n\n    downloadBlob = createBlobUrl(\n      ['Start,End,Title,Hours'].concat(lines).join('\\n')\n    );\n    filename = `${currentCalendarName}_${dayjs(date)\n      .locale('en')\n      .format('MMMM_YYYY')}_(${dayjs().format('YYYYMMDDHHmmss')}).csv`;\n  }\n\n  return (\n    <div>\n      <ul className={styles.list}>\n        {eventsToRender.map((event) => (\n          <li key={event.id} className={cx(bootstrap.row, styles.listItem)}>\n            {sortBy === SORT_BY.DATE && (\n              <span\n                className={cx(styles.eventDate, bootstrap['col-sm'])}\n                title={formatDate(dayjs(event.start.dateTime), {\n                  day: '2-digit',\n                  month: '2-digit',\n                  year: 'numeric',\n                })}\n              >\n                {formatDate(dayjs(event.start.dateTime), {\n                  day: '2-digit',\n                  month: '2-digit',\n                })}\n              </span>\n            )}\n            <span\n              className={cx(bootstrap['col-sm'], styles.eventName)}\n              title={event.summary}\n            >\n              {event.summary}\n            </span>\n            <span\n              className={cx(bootstrap['col-sm'], styles.eventHours)}\n            >{`${event.hours}h`}</span>\n          </li>\n        ))}\n      </ul>\n      <div>\n        <span className={styles.sortByLabel}>Sort by:</span>\n        <div\n          className={cx(bootstrap['btn-group'], bootstrap['btn-group-sm'])}\n          role=\"group\"\n        >\n          <input\n            className={bootstrap['btn-check']}\n            type=\"radio\"\n            value=\"date\"\n            id=\"date\"\n            checked={sortBy === SORT_BY.DATE}\n            onChange={({ target }) => setSortBy(target.value)}\n          />\n          <label\n            className={cx(bootstrap.btn, bootstrap['btn-outline-secondary'])}\n            htmlFor=\"date\"\n          >\n            Date\n          </label>\n          <input\n            className={bootstrap['btn-check']}\n            type=\"radio\"\n            value=\"amount\"\n            id=\"amount\"\n            checked={sortBy === SORT_BY.AMOUNT}\n            onChange={({ target }) => setSortBy(target.value)}\n          />\n          <label\n            className={cx(bootstrap.btn, bootstrap['btn-outline-secondary'])}\n            htmlFor=\"amount\"\n          >\n            Amount\n          </label>\n        </div>\n        {downloadBlob && (\n          <a\n            href={downloadBlob}\n            download={filename}\n            className={cx(\n              styles.downloadLink,\n              bootstrap.btn,\n              bootstrap['btn-outline-secondary'],\n              bootstrap['btn-sm']\n            )}\n          >\n            Export as CSV\n          </a>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default Events;\n","import React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport cx from 'classnames';\nimport bootstrap from 'bootstrap/dist/css/bootstrap.css';\n\nimport { selectWeekStart, changeWeekStart } from '../stores/viewState';\nimport { WEEK_START } from '../constants';\n\nimport styles from './WeekStart.module.css';\n\nconst WeekStart = () => {\n  const dispatch = useDispatch();\n\n  const weekStart = useSelector(selectWeekStart);\n\n  return (\n    <div>\n      <span className={styles.weekStartLabel}>Week starts on:</span>\n      <div\n        className={cx(bootstrap['btn-group'], bootstrap['btn-group-sm'])}\n        role=\"group\"\n      >\n        <input\n          className={bootstrap['btn-check']}\n          type=\"radio\"\n          value=\"sunday\"\n          id=\"sunday\"\n          checked={weekStart === WEEK_START.SUNDAY}\n          onChange={({ target }) => dispatch(changeWeekStart(target.value))}\n        />\n        <label\n          className={cx(bootstrap.btn, bootstrap['btn-outline-secondary'])}\n          htmlFor=\"sunday\"\n        >\n          Sunday\n        </label>\n        <input\n          className={bootstrap['btn-check']}\n          type=\"radio\"\n          value=\"monday\"\n          id=\"monday\"\n          checked={weekStart === WEEK_START.MONDAY}\n          onChange={({ target }) => dispatch(changeWeekStart(target.value))}\n        />\n        <label\n          className={cx(bootstrap.btn, bootstrap['btn-outline-secondary'])}\n          htmlFor=\"monday\"\n        >\n          Monday\n        </label>\n      </div>\n    </div>\n  );\n};\n\nexport default WeekStart;\n","import React, { useState, useEffect, Fragment } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport cx from 'classnames';\nimport bootstrap from 'bootstrap/dist/css/bootstrap.css';\n\nimport CalendarsList from './features/CalendarsList';\nimport Range from './features/Range';\nimport RangeChanger from './features/RangeChanger';\nimport CustomRange from './features/CustomRange';\nimport Hours from './features/Hours';\nimport RangeDisplay from './features/RangeDisplay';\nimport Events from './features/Events';\nimport WeekStart from './features/WeekStart';\nimport {\n  selectSelectedCalendar,\n  selectRangeType,\n  selectHours,\n} from './stores/viewState';\nimport {\n  selectCalendarEvents,\n  selectIsEventsLoading,\n} from './stores/calendarEvents';\nimport { loadCalendars, selectCalendars } from './stores/calendars';\nimport { RANGE_TYPE } from './constants';\n\nimport styles from './Interface.module.css';\n\nconst Interface = () => {\n  const dispatch = useDispatch();\n  const [isEventsOpen, setIsEventsOpen] = useState(false);\n\n  const calendars = useSelector(selectCalendars);\n\n  useEffect(() => {\n    if (!calendars) {\n      dispatch(loadCalendars());\n    }\n  });\n\n  const selectedCalendar = useSelector(selectSelectedCalendar);\n  const events = useSelector((state) =>\n    selectCalendarEvents(state, selectedCalendar)\n  );\n  const eventsLoading = useSelector(selectIsEventsLoading);\n  const rangeType = useSelector(selectRangeType);\n  const hours = useSelector(selectHours);\n\n  return (\n    <div className={styles.interface}>\n      {calendars ? <CalendarsList /> : <div>loading</div>}\n      {eventsLoading && 'loading'}\n      {events && (\n        <Fragment>\n          <Range />\n          {rangeType !== RANGE_TYPE.TOTAL &&\n            rangeType !== RANGE_TYPE.CUSTOM && <RangeChanger />}\n          {rangeType === RANGE_TYPE.CUSTOM && <CustomRange />}\n          <Hours />\n          {rangeType === RANGE_TYPE.WEEK && <WeekStart />}\n          {rangeType !== RANGE_TYPE.TOTAL && <RangeDisplay />}\n          {!!hours && (\n            <div>\n              <button\n                type=\"button\"\n                className={cx(\n                  bootstrap.btn,\n                  bootstrap['btn-outline-secondary'],\n                  bootstrap['btn-sm']\n                )}\n                onClick={() => setIsEventsOpen(!isEventsOpen)}\n              >\n                {isEventsOpen ? 'hide details' : 'show details'}\n              </button>\n            </div>\n          )}\n          {!!hours && isEventsOpen && <Events />}\n        </Fragment>\n      )}\n    </div>\n  );\n};\n\nexport default Interface;\n","import React, { useEffect } from 'react';\nimport { useSelector } from 'react-redux';\nimport { decode } from 'qss';\n\nimport { selectHasToken } from './stores/authentication';\n\nimport AuthScreen from './AuthScreen';\nimport Interface from './Interface';\n\nimport styles from './App.module.css';\n\nconst App = () => {\n  const hasToken = useSelector(selectHasToken);\n\n  useEffect(() => {\n    const hashParams = decode(window.location?.hash?.slice(1) ?? '');\n\n    if (hashParams.access_token) {\n      sessionStorage.setItem('accessToken', hashParams.access_token);\n      window.location = '/';\n    }\n  }, []);\n\n  return (\n    <div className={styles.appWrapper}>\n      <div className={styles.app}>\n        <div className={styles.sticky}>\n          <div className={styles.content}>\n            <h1 className={styles.headline}>\n              Google Calendar Hours Calculator\n            </h1>\n            {!hasToken && <AuthScreen />}\n            {hasToken && <Interface />}\n          </div>\n          <footer className={styles.footer}>\n            <p>\n              <span>© 2011 - 2021. This app is open source. </span>\n              <a\n                href=\"https://github.com/aronwoost/google-calendar-hours\"\n                target=\"_blank\"\n                rel=\"noreferrer\"\n              >\n                Check it on GitHub\n              </a>\n              <span>.</span>\n            </p>\n          </footer>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n","import { configureStore } from '@reduxjs/toolkit';\nimport dayjs from 'dayjs';\nimport weekday from 'dayjs/plugin/weekday';\n\nimport authentication from './authentication';\nimport calendars from './calendars';\nimport viewState from './viewState';\nimport calendarEvents from './calendarEvents';\nimport { getConfig } from './storage';\nimport { RANGE_TYPE, WEEK_START } from '../constants';\n\ndayjs.extend(weekday);\n\nconst getAccessToken = () => {\n  try {\n    return sessionStorage.getItem('accessToken');\n  } catch (e) {\n    // don't handle\n  }\n\n  return null;\n};\n\nconst getViewState = () => {\n  const config = getConfig() ?? {};\n  return {\n    selectedRangeType: config.selectedRangeType ?? RANGE_TYPE.MONTH,\n    currentDatePointerStart:\n      config.selectedRangeType === RANGE_TYPE.CUSTOM\n        ? config.start\n        : dayjs().startOf('day').toJSON(),\n    currentDatePointerEnd: config.end,\n    weekStart: config.weekStart ?? WEEK_START.MONDAY,\n  };\n};\n\nconst store = () =>\n  configureStore({\n    reducer: {\n      authentication,\n      calendars,\n      viewState,\n      calendarEvents,\n    },\n    preloadedState: {\n      authentication: { accessToken: getAccessToken() },\n      viewState: getViewState(),\n    },\n  });\n\nexport default store;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\n\nimport './index.css';\nimport App from './App';\nimport store from './stores';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store()}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"list\":\"Events_list__3uAhA\",\"listItem\":\"Events_listItem__2dyHI\",\"eventDate\":\"Events_eventDate__1FH8S\",\"eventName\":\"Events_eventName__hBqYC\",\"eventHours\":\"Events_eventHours__2bIBe\",\"sortByLabel\":\"Events_sortByLabel__1oEr6\",\"downloadLink\":\"Events_downloadLink__g8EJ3\"};"],"sourceRoot":""}